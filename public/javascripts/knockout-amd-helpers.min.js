// knockout-amd-helpers 0.2.4 | (c) 2013 Ryan Niemeyer |  http://www.opensource.org/licenses/mit-license
define(["knockout"],function(e){var t=window.require||window.curl,n=e.utils.unwrapObservable,i=function(e,t){var n,i=function(){return e.apply(this,t)};return i.prototype=e.prototype,n=new i,n.constructor=e,n},a=function(e){return e&&e.replace(/\/?$/,"/")};e.bindingHandlers.module={init:function(r,o,l,u,s){var d=o(),p=n(d),m={},c=e.bindingHandlers.module.initializer||"initialize";return p&&"object"==typeof p&&(c=p.initializer||c,e.utils.arrayForEach(["afterRender","templateEngine"],function(e){p[e]&&(m[e]=p[e])})),r.firstChild||(m.name=function(){var e=n(d);return(e&&"object"==typeof e?n(e.template||e.name):e)||""}),m.data=e.observable(),m["if"]=m.data,e.applyBindingsToNode(r,{template:m},s),e.computed({read:function(){var r,o=n(d);o&&"object"==typeof o&&(r=[].concat(n(o.data)),o=n(o.name)),m.data(null),o&&t([a(e.bindingHandlers.module.baseDir)+o],function(e){"function"==typeof e?e=i(e,r):e&&e[c]&&(e=e[c].apply(e,r)||e),m.data(e)})},disposeWhenNodeIsRemoved:r}),{controlsDescendantBindings:!0}},baseDir:"",initializer:"initialize"},e.virtualElements&&(e.virtualElements.allowedBindings.module=!0),function(e,t){var n=new e.nativeTemplateEngine,i={};n.defaultPath="templates",n.defaultSuffix=".tmpl.html",e.templateSources.requireTemplate=function(t){this.key=t,this.template=e.observable(" "),this.requested=!1},e.templateSources.requireTemplate.prototype.text=function(){return!this.requested&&this.key&&(t(["text!"+a(n.defaultPath)+this.key+n.defaultSuffix],this.template),this.requested=!0),this.key||this.template(""),0===arguments.length?this.template():void 0},n.makeTemplateSource=function(t,n){var a;return"string"==typeof t?(a=(n||document).getElementById(t),a&&"script"===a.tagName.toLowerCase()?new e.templateSources.domElement(a):(t in i||(i[t]=new e.templateSources.requireTemplate(t)),i[t])):!t||1!==t.nodeType&&8!==t.nodeType?void 0:new e.templateSources.anonymousTemplate(t)},e.amdTemplateEngine=n,e.setTemplateEngine(n)}(e,t)});